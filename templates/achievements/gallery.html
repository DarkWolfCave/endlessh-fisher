{% extends "base.html" %}
{% load game_tags %}

{% block title %}Achievements - {{ GAME_NAME }}{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
    <h2 style="font-size: 1.25rem; font-weight: 700; color: var(--color-accent);">
        &#x1F3C6; Achievements
    </h2>
    <div style="display: flex; gap: 1.5rem; font-size: 0.875rem;">
        <div>
            <span style="color: var(--color-text-muted);">{{ "Freigeschaltet:"|t }}</span>
            <span style="font-weight: 700; color: var(--color-uncommon);">{{ unlocked_count }}/{{ total_achievements }}</span>
        </div>
        <div>
            <span style="color: var(--color-text-muted);">{{ "Punkte:"|t }}</span>
            <span style="font-weight: 700; color: var(--color-legendary);">{{ total_points|score_format }}</span>
        </div>
    </div>
</div>

{% for category in categories %}
<div style="margin-bottom: 2rem;">
    <h3 style="font-weight: 700; margin-bottom: 1rem; color: var(--color-text);">
        {{ category|lang:"name" }}
    </h3>
    <div class="grid-achievements">
        {% for achievement in category.achievements.all %}
        <div class="game-card" style="{% if not achievement.unlock_record %}opacity: 0.5;{% endif %}">
            <div style="display: flex; justify-content: space-between; align-items: start;">
                {% if achievement.is_secret and not achievement.unlock_record %}
                <span style="font-size: 1.5rem;">&#x2753;</span>
                {% else %}
                <span style="font-size: 1.5rem;">&#x1F3C5;</span>
                {% endif %}
                <span class="badge badge-{{ achievement.rarity }}">
                    {{ achievement.rarity|rarity_de }}
                </span>
            </div>
            {% if achievement.is_secret and not achievement.unlock_record %}
            <h4 style="font-weight: 700; margin-top: 0.5rem; color: var(--color-text-muted);">{{ "Geheim"|t }}</h4>
            <p style="font-size: 0.875rem; color: var(--color-text-muted); margin-top: 0.25rem;">???</p>
            {% else %}
            <h4 style="font-weight: 700; margin-top: 0.5rem;">{{ achievement|lang:"name" }}</h4>
            <p style="font-size: 0.875rem; color: var(--color-text-muted); margin-top: 0.25rem;">{{ achievement|lang:"description" }}</p>
            {% endif %}
            <div style="display: flex; justify-content: space-between; margin-top: 0.75rem; font-size: 0.75rem;">
                <span style="color: var(--color-legendary);">{{ achievement.points }} {{ "Punkte"|t }}</span>
                {% if achievement.unlock_record %}
                <span style="color: var(--color-uncommon);">&#x2714; {{ achievement.unlock_record.unlocked_at|date:"d.m.Y" }}</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endfor %}
{% endblock %}
